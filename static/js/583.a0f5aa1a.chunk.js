"use strict";(self.webpackChunksevara=self.webpackChunksevara||[]).push([[583],{4583:(e,s,t)=>{t.r(s),t.d(s,{CoursesPage:()=>j});var r=t(5043),i=t(9748),n=t(349),l=t(1645),a=t(9073),c=t(5206),d=t(7419),o=t(1115),u=t(7210),p=t(2250),h=t(9071),m=t(5389),x=t(579);const j=()=>{const e=(0,p.Zp)(),s=(0,h.Ht)(),[t,j]=(0,r.useState)([]),[A,g]=(0,r.useState)(!1),[y]=i.A.useForm();(0,r.useEffect)((()=>{const e=(0,m.OM)();j(e)}),[]);let v=[],f=[];"teacher"===(null===s||void 0===s?void 0:s.role)?(v=t.filter((e=>e.teacherId===s.username)),f=t.filter((e=>e.teacherId!==s.username))):"student"===(null===s||void 0===s?void 0:s.role)&&(v=t.filter((e=>e.participants.includes(s.username))),f=t.filter((e=>!e.participants.includes(s.username))));const k=()=>{g(!1),y.resetFields()},C=t=>(0,x.jsx)(l.A,{xs:24,sm:12,md:8,lg:6,style:{marginBottom:16},children:(0,x.jsxs)(a.A,{title:t.title,hoverable:!0,style:{height:"100%",cursor:"pointer"},onClick:()=>{return s=t.id,void e("/courses/".concat(s));var s},children:[(0,x.jsx)("p",{children:t.description}),"student"===s.role&&t.participants.includes(s.username)&&(0,x.jsx)("p",{style:{color:"green"},children:"\u0412\u044b \u0443\u0447\u0430\u0441\u0442\u0432\u0443\u0435\u0442\u0435 \u0432 \u043a\u0443\u0440\u0441\u0435"})]})},t.id),b=e=>(0,x.jsx)(l.A,{xs:24,sm:12,md:8,lg:6,style:{marginBottom:16},children:(0,x.jsxs)(a.A,{title:e.title,hoverable:!1,style:{height:"100%",cursor:"default"},children:[(0,x.jsx)("p",{children:e.description}),"student"===s.role&&!e.participants.includes(s.username)&&(0,x.jsx)(c.Ay,{type:"primary",onClick:()=>(e=>{const r=t.find((s=>s.id===e));if(r&&!r.participants.includes(s.username)){const t=[...r.participants,s.username],i=(0,m.J4)(e,{participants:t});j((s=>s.map((s=>s.id===e?i:s)))),n.Ay.success({message:"\u0412\u044b \u0437\u0430\u043f\u0438\u0441\u0430\u043b\u0438\u0441\u044c \u043d\u0430 \u043a\u0443\u0440\u0441"})}})(e.id),children:"\u0417\u0430\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f"})]})},e.id);return(0,x.jsxs)("div",{style:{padding:16},children:[(0,x.jsx)("h2",{children:"\u041a\u0443\u0440\u0441\u044b"}),"teacher"===(null===s||void 0===s?void 0:s.role)&&(0,x.jsx)(c.Ay,{type:"primary",style:{marginBottom:16},onClick:()=>{g(!0),y.resetFields()},children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043a\u0443\u0440\u0441"}),(0,x.jsx)("h3",{children:"\u041c\u043e\u0438 \u043a\u0443\u0440\u0441\u044b"}),(0,x.jsx)(d.A,{gutter:[16,16],children:v.map((e=>C(e)))}),(0,x.jsx)("h3",{style:{marginTop:32},children:"\u0414\u0440\u0443\u0433\u0438\u0435 \u043a\u0443\u0440\u0441\u044b"}),(0,x.jsx)(d.A,{gutter:[16,16],children:f.map((e=>b(e)))}),(0,x.jsx)(o.A,{title:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043a\u0443\u0440\u0441",open:A,onCancel:k,onOk:()=>{y.validateFields().then((e=>{const{title:t,description:r}=e,i=(0,m.C_)({title:t,description:r,teacherId:s.username,participants:[],createdAt:(new Date).toISOString()});j((e=>[i,...e])),n.Ay.success({message:"\u041a\u0443\u0440\u0441 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0437\u0434\u0430\u043d!"}),k()}))},children:(0,x.jsxs)(i.A,{layout:"vertical",form:y,children:[(0,x.jsx)(i.A.Item,{label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043a\u0443\u0440\u0441\u0430",name:"title",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"}],children:(0,x.jsx)(u.A,{})}),(0,x.jsx)(i.A.Item,{label:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043a\u0443\u0440\u0441\u0430",name:"description",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"}],children:(0,x.jsx)(u.A.TextArea,{rows:3})})]})})]})}}}]);
//# sourceMappingURL=583.a0f5aa1a.chunk.js.map