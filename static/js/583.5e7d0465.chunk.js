"use strict";(self.webpackChunksevara=self.webpackChunksevara||[]).push([[583],{4583:(e,t,s)=>{s.r(t),s.d(t,{CoursesPage:()=>g});var i=s(5043),r=s(9748),a=s(349),n=s(1645),l=s(9073),d=s(5206),c=s(7419),o=s(1115),u=s(7210),p=s(2250),h=s(9071),m=s(5389),x=s(579);const g=()=>{const e=(0,p.Zp)(),t=(0,h.Ht)(),[s,g]=(0,i.useState)([]),[j,A]=(0,i.useState)(!1),[f]=r.A.useForm();(0,i.useEffect)((()=>{let e=(0,m.OM)();if(!e.some((e=>"2"===e.id))){const t={id:"2",title:"\u0424\u0438\u0437\u0438\u043a\u0430",description:"\u0412\u0432\u0435\u0434\u0435\u043d\u0438\u0435 \u0432 \u043c\u0435\u0445\u0430\u043d\u0438\u043a\u0443",teacherId:"teacher",participants:[],materials:[{id:"1743408573894",title:"\u0427\u0442\u043e \u0442\u0430\u043a\u043e\u0435 \u0444\u0438\u0437\u0438\u043a\u0430?",fileData:"",authorId:"teacher",createdAt:"2025-03-31T08:09:33.893Z",url:"https://example.com/algebra.pdf"}],submissions:[{id:"1743420673589",grade:"3",studentId:"iska",fileData:"data:image/svg+xml;base64,...",comment:"\u044b\u0432\u0430",createdAt:"2025-03-31T11:31:13.588Z"},{id:"1743423911022",grade:"4",studentId:"student",fileData:"data:image/png;base64,...",comment:"Student",createdAt:"2025-03-31T12:25:11.022Z"}],url:""};e.push(t),(0,m.bU)(e)}g(e)}),[]);let v=[],y=[];"teacher"===(null===t||void 0===t?void 0:t.role)?(v=s.filter((e=>e.teacherId===t.username)),y=s.filter((e=>e.teacherId!==t.username))):"student"===(null===t||void 0===t?void 0:t.role)&&(v=s.filter((e=>e.participants.includes(t.username))),y=s.filter((e=>!e.participants.includes(t.username))));const b=()=>{A(!1),f.resetFields()},I=s=>(0,x.jsx)(n.A,{xs:24,sm:12,md:8,lg:6,style:{marginBottom:16},children:(0,x.jsxs)(l.A,{title:s.title,hoverable:!0,style:{height:"100%",cursor:"pointer"},onClick:()=>{return t=s.id,void e("/courses/".concat(t));var t},children:[(0,x.jsx)("p",{children:s.description}),"student"===t.role&&s.participants.includes(t.username)&&(0,x.jsx)("p",{style:{color:"green"},children:"\u0412\u044b \u0443\u0447\u0430\u0441\u0442\u0432\u0443\u0435\u0442\u0435 \u0432 \u043a\u0443\u0440\u0441\u0435"})]})},s.id),k=e=>(0,x.jsx)(n.A,{xs:24,sm:12,md:8,lg:6,style:{marginBottom:16},children:(0,x.jsxs)(l.A,{title:e.title,hoverable:!1,style:{height:"100%",cursor:"default"},children:[(0,x.jsx)("p",{children:e.description}),"student"===t.role&&!e.participants.includes(t.username)&&(0,x.jsx)(d.Ay,{type:"primary",onClick:()=>(e=>{const i=s.find((t=>t.id===e));if(i&&!i.participants.includes(t.username)){const s=[...i.participants,t.username],r=(0,m.J4)(e,{participants:s});g((t=>t.map((t=>t.id===e?r:t)))),a.Ay.success({message:"\u0412\u044b \u0437\u0430\u043f\u0438\u0441\u0430\u043b\u0438\u0441\u044c \u043d\u0430 \u043a\u0443\u0440\u0441"})}})(e.id),children:"\u0417\u0430\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f"})]})},e.id);return(0,x.jsxs)("div",{style:{padding:16},children:[(0,x.jsx)("h2",{children:"\u041a\u0443\u0440\u0441\u044b"}),"teacher"===(null===t||void 0===t?void 0:t.role)&&(0,x.jsx)(d.Ay,{type:"primary",style:{marginBottom:16},onClick:()=>{A(!0),f.resetFields()},children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043a\u0443\u0440\u0441"}),(0,x.jsx)("h3",{children:"\u041c\u043e\u0438 \u043a\u0443\u0440\u0441\u044b"}),0===v.length?(0,x.jsx)("p",{children:"\u041d\u0435\u0442 \u043a\u0443\u0440\u0441\u043e\u0432"}):(0,x.jsx)(c.A,{gutter:[16,16],children:v.map((e=>I(e)))}),(0,x.jsx)("h3",{style:{marginTop:32},children:"\u0414\u0440\u0443\u0433\u0438\u0435 \u043a\u0443\u0440\u0441\u044b"}),0===y.length?(0,x.jsx)("p",{children:"\u041d\u0435\u0442 \u043a\u0443\u0440\u0441\u043e\u0432"}):(0,x.jsx)(c.A,{gutter:[16,16],children:y.map((e=>k(e)))}),(0,x.jsx)(o.A,{title:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043a\u0443\u0440\u0441",open:j,onCancel:b,onOk:()=>{f.validateFields().then((e=>{const{title:s,description:i}=e,r=(0,m.C_)({title:s,description:i,teacherId:t.username,participants:[],createdAt:(new Date).toISOString()});g((e=>[r,...e])),a.Ay.success({message:"\u041a\u0443\u0440\u0441 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0437\u0434\u0430\u043d!"}),b()}))},children:(0,x.jsxs)(r.A,{layout:"vertical",form:f,children:[(0,x.jsx)(r.A.Item,{label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043a\u0443\u0440\u0441\u0430",name:"title",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"}],children:(0,x.jsx)(u.A,{})}),(0,x.jsx)(r.A.Item,{label:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043a\u0443\u0440\u0441\u0430",name:"description",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"}],children:(0,x.jsx)(u.A.TextArea,{rows:3})})]})})]})}}}]);
//# sourceMappingURL=583.5e7d0465.chunk.js.map