{"version":3,"file":"static/js/583.8c53a8d4.chunk.js","mappings":"mKAAA,MAAMA,EAAc,UAEdC,EAAiB,CACnB,CACIC,GAAI,IACJC,MAAO,+DACPC,YAAa,gJACbC,UAAW,WAEf,CACIH,GAAI,IACJC,MAAO,uCACPC,YAAa,2GACbC,UAAW,YAIZ,SAASC,IACZ,MAAMC,EAAOC,aAAaC,QAAQT,GAClC,IAAKO,EAED,OADAC,aAAaE,QAAQV,EAAaW,KAAKC,UAAUX,IAC1CA,EAEX,IACI,OAAOU,KAAKE,MAAMN,EACtB,CAAE,MAAOO,GAEL,OADAC,QAAQC,MAAM,uJAA0CF,GACjD,EACX,CACJ,CAGO,SAASG,EAAcf,GAE1B,OADgBI,IACDY,MAAMC,GAAMA,EAAEjB,KAAOA,KAAO,IAC/C,CAGA,SAASkB,EAAeC,GACpBb,aAAaE,QAAQV,EAAaW,KAAKC,UAAUS,GACrD,CAGO,SAASC,EAAaC,GACzB,MAAMF,EAAUf,IAEVkB,EAAQC,OAAOC,KAAKC,OACpBC,GAASC,EAAAA,EAAAA,GAAA,CAAK3B,GAAIsB,GAAUD,GAGlC,OAFAF,EAAQS,KAAKF,GACbR,EAAeC,GACRO,CACX,CAGO,SAASG,EAAa7B,EAAI8B,GAC7B,MAAMX,EAAUf,IACV2B,EAAQZ,EAAQa,WAAWf,GAAMA,EAAEjB,KAAOA,IAChD,OAAe,IAAX+B,EAAqB,MAEzBZ,EAAQY,IAAMJ,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAQR,EAAQY,IAAWD,GACzCZ,EAAeC,GACRA,EAAQY,GACnB,CAGO,SAASE,EAAajC,GACzB,IAAImB,EAAUf,IACde,EAAUA,EAAQe,QAAQjB,GAAMA,EAAEjB,KAAOA,IACzCkB,EAAeC,EACnB,C,oKC5DO,MAAMgB,EAAcA,KACvB,MAAMC,GAAWC,EAAAA,EAAAA,MACXC,GAAOC,EAAAA,EAAAA,OACNpB,EAASqB,IAAcC,EAAAA,EAAAA,UAAS,KAGhCC,EAAaC,IAAkBF,EAAAA,EAAAA,WAAS,IACxCG,GAAQC,EAAAA,EAAKC,WAEpBC,EAAAA,EAAAA,YAAU,KACN,IAAI1C,GAAOD,EAAAA,EAAAA,MAEXC,EAAOA,EAAK2C,MAAK,CAACC,EAAGC,IAAM,IAAI1B,KAAK0B,EAAEC,WAAa,IAAI3B,KAAKyB,EAAEE,aAC9DX,EAAWnC,EAAK,GACjB,IAEH,MAAM+C,EAAU,CACZ,CACInD,MAAO,qEACPoD,UAAW,WACXC,IAAK,WACLC,MAAO,GACPC,OAAQA,CAACC,EAAKC,KAEV,MACMC,EAAWF,GADI,2CAErB,OACIG,EAAAA,EAAAA,KAAA,OACIC,IAAKF,EACLG,IAAKJ,EAAOzD,MACZ8D,MAAO,CAAER,MAAO,GAAIS,OAAQ,GAAIC,UAAW,QAASC,aAAc,QACpE,GAId,CACIjE,MAAO,mDACPoD,UAAW,QACXC,IAAK,SAET,CACIrD,MAAO,mDACPoD,UAAW,cACXC,IAAK,eAET,CACIrD,MAAO,mDACPqD,IAAK,UACLE,OAAQA,CAACW,EAAMT,KACXE,EAAAA,EAAAA,KAACQ,EAAAA,GAAM,CAACC,KAAK,OAAOC,QAASA,IAAMlC,EAAS,YAADmC,OAAab,EAAO1D,KAAMwE,SAAC,iDAa5EC,EAAeA,KACjB9B,GAAe,GACfC,EAAK8B,aAAa,EAsCtB,OACIC,EAAAA,EAAAA,MAAA,OAAAH,SAAA,EACIZ,EAAAA,EAAAA,KAAA,MAAAY,SAAI,8EAEY,aAAX,OAAJlC,QAAI,IAAJA,OAAI,EAAJA,EAAMsC,QACHhB,EAAAA,EAAAA,KAACQ,EAAAA,GAAM,CAACC,KAAK,UAAUC,QAlDXO,KACpBlC,GAAe,EAAK,EAiDqCoB,MAAO,CAAEe,aAAc,IAAKN,SAAC,+EAKlFZ,EAAAA,EAAAA,KAACmB,EAAAA,EAAK,CACFC,OAAO,KACP5B,QAASA,EACT6B,WAAY9D,EACZ+D,YAAY,KAGhBtB,EAAAA,EAAAA,KAACuB,EAAAA,EAAK,CACFlF,MAAM,4EACNmF,KAAM1C,EACN2C,SAAUZ,EACVa,KAAMA,IAAM1C,EAAK2C,SAASf,UAE1BG,EAAAA,EAAAA,MAAC9B,EAAAA,EAAI,CACDD,KAAMA,EACN4C,OAAO,WACPC,SA5DKC,UACjB,IACI,MAAM,MAAEzF,EAAK,YAAEC,EAAW,SAAEyF,GAAaC,EAEnClE,GAAYN,EAAAA,EAAAA,IAAa,CAC3BnB,QACAC,cACAC,UAAWmC,EAAKuD,MAChB1C,WAAW,IAAI3B,MAAOsE,cACtBH,aAIJnD,GAAYuD,GACQ,IAAIA,EAAMrE,GACXsB,MAAK,CAACC,EAAGC,IAAM,IAAI1B,KAAK0B,EAAEC,WAAa,IAAI3B,KAAKyB,EAAEE,eAIrE6C,EAAAA,GAAaC,QAAQ,CAAEC,QAAS,8GAGhCzB,GACJ,CAAE,MAAO3D,GACLD,QAAQC,MAAMA,GACdkF,EAAAA,GAAalF,MAAM,CAAEoF,QAAS,2IAClC,GAmCYC,eA/BYC,IACxBvF,QAAQwF,IAAI,qBAAsBD,EAAU,EA8BG5B,SAAA,EAEnCZ,EAAAA,EAAAA,KAACf,EAAAA,EAAKyD,KAAI,CACNC,MAAM,kFACNC,KAAK,QACLC,MAAO,CAAC,CAAEC,UAAU,EAAMR,QAAS,+HAA4B1B,UAE/DZ,EAAAA,EAAAA,KAAC+C,EAAAA,EAAK,OAEV/C,EAAAA,EAAAA,KAACf,EAAAA,EAAKyD,KAAI,CACNC,MAAM,mDACNC,KAAK,cACLC,MAAO,CAAC,CAAEC,UAAU,EAAMR,QAAS,+HAA4B1B,UAE/DZ,EAAAA,EAAAA,KAAC+C,EAAAA,EAAMC,SAAQ,CAACC,KAAM,OAE1BjD,EAAAA,EAAAA,KAACf,EAAAA,EAAKyD,KAAI,CACNC,MAAM,wMACNC,KAAK,WACLC,MAAO,CACH,CACIpC,KAAM,MACN6B,QAAS,uOAEf1B,UAEFZ,EAAAA,EAAAA,KAAC+C,EAAAA,EAAK,CAACG,YAAY,2CAI7B,C","sources":["entities/course/model/courseStorage.js","pages/CoursesPage/ui/CoursesPage.jsx"],"sourcesContent":["const STORAGE_KEY = \"courses\";\n\nconst initialCourses = [\n    {\n        id: \"1\",\n        title: \"Математика\",\n        description: \"Базовый курс по математике\",\n        teacherId: \"teacher\",\n    },\n    {\n        id: \"2\",\n        title: \"Физика\",\n        description: \"Введение в механику\",\n        teacherId: \"teacher\",\n    },\n];\n\nexport function getAllCourses() {\n    const data = localStorage.getItem(STORAGE_KEY);\n    if (!data) {\n        localStorage.setItem(STORAGE_KEY, JSON.stringify(initialCourses));\n        return initialCourses;\n    }\n    try {\n        return JSON.parse(data);\n    } catch (e) {\n        console.error(\"Ошибка парсинга курсов из localStorage\", e);\n        return [];\n    }\n}\n\n// Функция поиска курса по id\nexport function getCourseById(id) {\n    const courses = getAllCourses();\n    return courses.find((c) => c.id === id) || null;\n}\n\n// Сохранить весь массив курсов\nfunction saveAllCourses(courses) {\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(courses));\n}\n\n// Создать новый курс\nexport function createCourse(courseData) {\n    const courses = getAllCourses();\n    // Генерация условного ID\n    const newId = String(Date.now());\n    const newCourse = { id: newId, ...courseData };\n    courses.push(newCourse);\n    saveAllCourses(courses);\n    return newCourse;\n}\n\n// Обновить существующий курс\nexport function updateCourse(id, updates) {\n    const courses = getAllCourses();\n    const index = courses.findIndex((c) => c.id === id);\n    if (index === -1) return null;\n\n    courses[index] = { ...courses[index], ...updates };\n    saveAllCourses(courses);\n    return courses[index];\n}\n\n// Удалить курс\nexport function deleteCourse(id) {\n    let courses = getAllCourses();\n    courses = courses.filter((c) => c.id !== id);\n    saveAllCourses(courses);\n}\n","import React, { useEffect, useState } from \"react\";\nimport { Table, Button, Modal, Form, Input, notification } from \"antd\";\nimport { useNavigate } from \"react-router-dom\";\nimport { getSession } from \"../../../features/auth/model/session\";\nimport {\n    getAllCourses,\n    createCourse,\n} from \"../../../entities/course/model/courseStorage\";\n\nexport const CoursesPage = () => {\n    const navigate = useNavigate();\n    const user = getSession();\n    const [courses, setCourses] = useState([]);\n\n    // Модалка для создания курса\n    const [isModalOpen, setIsModalOpen] = useState(false);\n    const [form] = Form.useForm();\n\n    useEffect(() => {\n        let data = getAllCourses();\n        // Сортируем курсы (новые сверху)\n        data = data.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));\n        setCourses(data);\n    }, []);\n\n    const columns = [\n        {\n            title: \"Изображение\",\n            dataIndex: \"imageUrl\",\n            key: \"imageUrl\",\n            width: 70,\n            render: (url, record) => {\n                // Используем другую заглушку\n                const defaultImage = \"https://placehold.co/50x50?text=No+Image\";\n                const imageSrc = url || defaultImage;\n                return (\n                    <img\n                        src={imageSrc}\n                        alt={record.title}\n                        style={{ width: 50, height: 50, objectFit: \"cover\", borderRadius: \"50%\" }}\n                    />\n                );\n            },\n        },\n        {\n            title: \"Название\",\n            dataIndex: \"title\",\n            key: \"title\",\n        },\n        {\n            title: \"Описание\",\n            dataIndex: \"description\",\n            key: \"description\",\n        },\n        {\n            title: \"Действия\",\n            key: \"actions\",\n            render: (text, record) => (\n                <Button type=\"link\" onClick={() => navigate(`/courses/${record.id}`)}>\n                    Открыть\n                </Button>\n            ),\n        },\n    ];\n\n    // Открытие модалки\n    const handleOpenModal = () => {\n        setIsModalOpen(true);\n    };\n\n    // Закрыть модалку\n    const handleCancel = () => {\n        setIsModalOpen(false);\n        form.resetFields();\n    };\n\n    // Успешная валидация формы -> создание курса\n    const handleFinish = async (values) => {\n        try {\n            const { title, description, imageUrl } = values;\n            // При создании добавляем поле createdAt\n            const newCourse = createCourse({\n                title,\n                description,\n                teacherId: user.login,\n                createdAt: new Date().toISOString(),\n                imageUrl,\n            });\n\n            // Добавляем новый курс в список и сортируем заново\n            setCourses((prev) => {\n                const updated = [...prev, newCourse];\n                return updated.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));\n            });\n\n            // Уведомление об успехе\n            notification.success({ message: \"Курс успешно создан!\" });\n\n            // Закрываем модалку\n            handleCancel();\n        } catch (error) {\n            console.error(error);\n            notification.error({ message: \"Ошибка при создании курса\" });\n        }\n    };\n\n    // Ошибка валидации\n    const handleFinishFailed = (errorInfo) => {\n        console.log(\"Validation Failed:\", errorInfo);\n    };\n\n    return (\n        <div>\n            <h2>Список курсов</h2>\n\n            {user?.role === \"teacher\" && (\n                <Button type=\"primary\" onClick={handleOpenModal} style={{ marginBottom: 16 }}>\n                    Добавить курс\n                </Button>\n            )}\n\n            <Table\n                rowKey=\"id\"\n                columns={columns}\n                dataSource={courses}\n                pagination={false}\n            />\n\n            <Modal\n                title=\"Добавить курс\"\n                open={isModalOpen}\n                onCancel={handleCancel}\n                onOk={() => form.submit()}\n            >\n                <Form\n                    form={form}\n                    layout=\"vertical\"\n                    onFinish={handleFinish}\n                    onFinishFailed={handleFinishFailed}\n                >\n                    <Form.Item\n                        label=\"Название курса\"\n                        name=\"title\"\n                        rules={[{ required: true, message: \"Введите название курса\" }]}\n                    >\n                        <Input />\n                    </Form.Item>\n                    <Form.Item\n                        label=\"Описание\"\n                        name=\"description\"\n                        rules={[{ required: true, message: \"Введите описание курса\" }]}\n                    >\n                        <Input.TextArea rows={3} />\n                    </Form.Item>\n                    <Form.Item\n                        label=\"Ссылка на изображение (необязательно)\"\n                        name=\"imageUrl\"\n                        rules={[\n                            {\n                                type: \"url\",\n                                message: \"Введите корректную ссылку на изображение (URL)\",\n                            },\n                        ]}\n                    >\n                        <Input placeholder=\"https://example.com/image.jpg\" />\n                    </Form.Item>\n                </Form>\n            </Modal>\n        </div>\n    );\n};\n"],"names":["STORAGE_KEY","initialCourses","id","title","description","teacherId","getAllCourses","data","localStorage","getItem","setItem","JSON","stringify","parse","e","console","error","getCourseById","find","c","saveAllCourses","courses","createCourse","courseData","newId","String","Date","now","newCourse","_objectSpread","push","updateCourse","updates","index","findIndex","deleteCourse","filter","CoursesPage","navigate","useNavigate","user","getSession","setCourses","useState","isModalOpen","setIsModalOpen","form","Form","useForm","useEffect","sort","a","b","createdAt","columns","dataIndex","key","width","render","url","record","imageSrc","_jsx","src","alt","style","height","objectFit","borderRadius","text","Button","type","onClick","concat","children","handleCancel","resetFields","_jsxs","role","handleOpenModal","marginBottom","Table","rowKey","dataSource","pagination","Modal","open","onCancel","onOk","submit","layout","onFinish","async","imageUrl","values","login","toISOString","prev","notification","success","message","onFinishFailed","errorInfo","log","Item","label","name","rules","required","Input","TextArea","rows","placeholder"],"sourceRoot":""}