"use strict";(self.webpackChunksevara=self.webpackChunksevara||[]).push([[248],{1002:(e,t,s)=>{s.d(t,{DC:()=>c,SK:()=>a,nN:()=>o});var n=s(9379);const r="schedule",l=[{id:"101",courseId:"1",date:"2025-02-01",time:"10:00",room:"\u0410\u0443\u0434\u0438\u0442\u043e\u0440\u0438\u044f 305"},{id:"102",courseId:"2",date:"2025-02-02",time:"12:30",room:"\u041b\u0430\u0431\u043e\u0440\u0430\u0442\u043e\u0440\u0438\u044f 2"}];function i(e){localStorage.setItem(r,JSON.stringify(e))}function c(){const e=localStorage.getItem(r);if(!e)return localStorage.setItem(r,JSON.stringify(l)),l;try{return JSON.parse(e)}catch(t){return console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0430\u0440\u0441\u0438\u043d\u0433\u0430 schedule \u0438\u0437 localStorage",t),[]}}function a(e){const t=c(),s=String(Date.now()),r=(0,n.A)({id:s},e);return t.push(r),i(t),r}function o(e){let t=c();t=t.filter((t=>t.id!==e)),i(t)}},1248:(e,t,s)=>{s.r(t),s.d(t,{DashboardPage:()=>b});var n=s(9379),r=s(5043),l=s(3927),i=s(7419),c=s(9071),a=s(5389),o=s(1002),d=s(1645),u=s(9073),h=s(5206),m=s(579);const{Title:x,Text:A}=l.A,g=e=>{let{title:t,value:s,extra:n,link:r,linkText:l}=e;return(0,m.jsx)(d.A,{span:8,children:(0,m.jsxs)(u.A,{className:"dashboard-card",children:[(0,m.jsx)(x,{level:4,children:t}),(0,m.jsx)(A,{className:"dashboard-card-value",children:s}),r&&(0,m.jsx)("div",{className:"dashboard-card-link",children:(0,m.jsx)(h.Ay,{type:"primary",href:r,children:l})})]})})};var j=s(9748),v=s(349),y=s(1115),f=s(7210);const p="news",S=[{id:"1",author:"Teacher Admin",role:"teacher",title:"\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c!",content:"\u041d\u0430\u0448\u0430 \u043f\u043b\u0430\u0442\u0444\u043e\u0440\u043c\u0430 \u043e\u0442\u043a\u0440\u044b\u0442\u0430 \u0434\u043b\u044f \u0432\u0441\u0435\u0445!",createdAt:"2025-01-10T09:30:00.000Z"},{id:"2",author:"Teacher Admin",role:"teacher",title:"\u0412\u0430\u0436\u043d\u043e\u0435 \u043e\u0431\u044a\u044f\u0432\u043b\u0435\u043d\u0438\u0435",content:"\u0417\u0430\u0432\u0442\u0440\u0430 \u043b\u0435\u043a\u0446\u0438\u044f \u043f\u043e \u041c\u0430\u0442\u0435\u043c\u0430\u0442\u0438\u043a\u0435 \u043e\u0442\u043c\u0435\u043d\u044f\u0435\u0442\u0441\u044f!",createdAt:"2025-01-15T12:00:00.000Z"}];function k(e){localStorage.setItem(p,JSON.stringify(e))}function w(){const e=localStorage.getItem(p);if(!e)return k(S),S;try{return JSON.parse(e)}catch(t){return console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0430\u0440\u0441\u0438\u043d\u0433\u0430 news \u0438\u0437 localStorage",t),[]}}const N=()=>{const e=(0,c.Ht)(),[t,s]=(0,r.useState)([]),[l,i]=(0,r.useState)(!1),[a]=j.A.useForm(),[o,d]=(0,r.useState)(!1),[x]=j.A.useForm(),[A,g]=(0,r.useState)(null);(0,r.useEffect)((()=>{const e=w();s(e)}),[]);const p=()=>{i(!1),a.resetFields()},S=()=>{d(!1),g(null),x.resetFields()},N=e=>{try{!function(e){let t=w();t=t.filter((t=>t.id!==e)),k(t)}(e),s((t=>t.filter((t=>t.id!==e)))),v.Ay.success({message:"\u041d\u043e\u0432\u043e\u0441\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u0430!"})}catch(t){v.Ay.error({message:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0438 \u043d\u043e\u0432\u043e\u0441\u0442\u0438"}),console.error(t)}};return(0,m.jsxs)("div",{className:"newsContainer",children:[(0,m.jsx)("h2",{children:"\u041d\u043e\u0432\u043e\u0441\u0442\u0438"}),"teacher"===(null===e||void 0===e?void 0:e.role)&&(0,m.jsx)(h.Ay,{type:"primary",style:{marginBottom:16},onClick:()=>{i(!0),a.resetFields()},children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043d\u043e\u0432\u043e\u0441\u0442\u044c"}),(0,m.jsx)("div",{className:"newsList",children:t.map((t=>(0,m.jsx)("div",{className:"newsCard",children:(0,m.jsxs)(u.A,{children:[(0,m.jsxs)("div",{className:"newsMeta",children:["\u0410\u0432\u0442\u043e\u0440: ",(0,m.jsx)("b",{children:t.author})," |"," ",new Date(t.createdAt).toLocaleString()]}),(0,m.jsx)("div",{className:"newsTitle",children:t.title}),(0,m.jsx)("div",{className:"newsContent",children:t.content}),"teacher"===(null===e||void 0===e?void 0:e.role)&&(0,m.jsxs)("div",{style:{textAlign:"right",marginTop:8},children:[(0,m.jsx)(h.Ay,{type:"link",onClick:()=>(e=>{g(e.id),d(!0),x.setFieldsValue({title:e.title,content:e.content})})(t),style:{marginRight:8},children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"}),(0,m.jsx)(h.Ay,{danger:!0,type:"link",onClick:()=>N(t.id),children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]})]})},t.id)))}),(0,m.jsx)(y.A,{title:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043d\u043e\u0432\u043e\u0441\u0442\u044c",open:l,onCancel:p,onOk:()=>a.submit(),children:(0,m.jsxs)(j.A,{form:a,layout:"vertical",onFinish:t=>{try{const r=function(e){const t=w(),s=String(Date.now()),r=(0,n.A)({id:s},e);return t.unshift(r),k(t),r}({author:e.fullName||e.login,role:e.role,title:t.title,content:t.content,createdAt:(new Date).toISOString()});s((e=>[r,...e])),v.Ay.success({message:"\u041d\u043e\u0432\u043e\u0441\u0442\u044c \u043e\u043f\u0443\u0431\u043b\u0438\u043a\u043e\u0432\u0430\u043d\u0430!"}),p()}catch(r){v.Ay.error({message:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0438 \u043d\u043e\u0432\u043e\u0441\u0442\u0438"}),console.error(r)}},children:[(0,m.jsx)(j.A.Item,{label:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a",name:"title",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u043d\u043e\u0432\u043e\u0441\u0442\u0438"}],children:(0,m.jsx)(f.A,{})}),(0,m.jsx)(j.A.Item,{label:"\u0421\u043e\u0434\u0435\u0440\u0436\u0430\u043d\u0438\u0435",name:"content",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043a\u0441\u0442 \u043d\u043e\u0432\u043e\u0441\u0442\u0438"}],children:(0,m.jsx)(f.A.TextArea,{rows:4})})]})}),(0,m.jsx)(y.A,{title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043d\u043e\u0432\u043e\u0441\u0442\u044c",open:o,onCancel:S,onOk:()=>x.submit(),children:(0,m.jsxs)(j.A,{form:x,layout:"vertical",onFinish:e=>{try{const t=function(e,t){const s=w(),r=s.findIndex((t=>t.id===e));return-1===r?null:(s[r]=(0,n.A)((0,n.A)({},s[r]),t),k(s),s[r])}(A,{title:e.title,content:e.content});s((e=>e.map((e=>e.id===A?t:e)))),v.Ay.success({message:"\u041d\u043e\u0432\u043e\u0441\u0442\u044c \u043e\u0442\u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0430!"}),S()}catch(t){v.Ay.error({message:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0438 \u043d\u043e\u0432\u043e\u0441\u0442\u0438"}),console.error(t)}},children:[(0,m.jsx)(j.A.Item,{label:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a",name:"title",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u043d\u043e\u0432\u043e\u0441\u0442\u0438"}],children:(0,m.jsx)(f.A,{})}),(0,m.jsx)(j.A.Item,{label:"\u0421\u043e\u0434\u0435\u0440\u0436\u0430\u043d\u0438\u0435",name:"content",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043a\u0441\u0442 \u043d\u043e\u0432\u043e\u0441\u0442\u0438"}],children:(0,m.jsx)(f.A.TextArea,{rows:4})})]})})]})},{Title:I,Text:T}=l.A,b=()=>{const[e,t]=(0,r.useState)(null),[s,l]=(0,r.useState)([]),[d,u]=(0,r.useState)([]),[h,x]=(0,r.useState)(null);(0,r.useEffect)((()=>{const e=(0,c.Ht)();e&&t(e);const s=(0,a.OM)();l(s);const r=(0,o.DC)();if(u(r),r.length>0){const e=new Date,t=r.map((e=>{const[t,s,r]=e.date.split("-"),[l,i]=e.time.split(":"),c=new Date(+t,+s-1,+r,+l,+i);return(0,n.A)((0,n.A)({},e),{},{eventDate:c})})).filter((t=>t.eventDate>e)).sort(((e,t)=>e.eventDate-t.eventDate));t.length>0&&x(t[0])}}),[]);let A=0;return e&&"teacher"===e.role&&(A=s.filter((t=>t.teacherId===e.login)).length),(0,m.jsxs)("div",{style:{padding:"16px"},children:[(0,m.jsxs)(I,{level:2,children:["\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c, ",null===e||void 0===e?void 0:e.fullName,"!"]}),(0,m.jsxs)(T,{children:["\u0412\u0430\u0448\u0430 \u0440\u043e\u043b\u044c: ",(0,m.jsx)("b",{children:"teacher"===(null===e||void 0===e?void 0:e.role)?"\u041f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u044c":"\u0421\u0442\u0443\u0434\u0435\u043d\u0442"})]}),(0,m.jsxs)(i.A,{gutter:[16,16],style:{marginTop:16},children:[(0,m.jsx)(g,{title:"\u0412\u0441\u0435\u0433\u043e \u043a\u0443\u0440\u0441\u043e\u0432:",value:s.length,link:"#/courses",linkText:"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u043a \u043a\u0443\u0440\u0441\u0430\u043c"}),(0,m.jsx)(g,{title:"\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435:",value:"".concat(d.length," \u0437\u0430\u043d\u044f\u0442\u0438\u0439"),extra:h?(0,m.jsxs)("div",{children:[(0,m.jsx)(T,{type:"secondary",children:"\u0411\u043b\u0438\u0436\u0430\u0439\u0448\u0435\u0435 \u0437\u0430\u043d\u044f\u0442\u0438\u0435:"}),(0,m.jsx)("div",{children:(0,m.jsxs)(T,{children:[h.date," \u0432 ",h.time,", \u043a\u0443\u0440\u0441 ID ",h.courseId]})})]}):(0,m.jsx)(T,{type:"secondary",children:"\u0411\u043b\u0438\u0436\u0430\u0439\u0448\u0438\u0445 \u0437\u0430\u043d\u044f\u0442\u0438\u0439 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e."}),link:"#/schedule",linkText:"\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435"})]}),(0,m.jsx)(N,{})]})}}}]);
//# sourceMappingURL=248.388d72c7.chunk.js.map