"use strict";(self.webpackChunksevara=self.webpackChunksevara||[]).push([[58],{1002:(e,t,s)=>{s.d(t,{DC:()=>a,SK:()=>c,nN:()=>o});var n=s(9379);const r="schedule",i=[{id:"101",courseId:"1",date:"2025-02-01",time:"10:00",room:"\u0410\u0443\u0434\u0438\u0442\u043e\u0440\u0438\u044f 305"},{id:"102",courseId:"2",date:"2025-02-02",time:"12:30",room:"\u041b\u0430\u0431\u043e\u0440\u0430\u0442\u043e\u0440\u0438\u044f 2"}];function l(e){localStorage.setItem(r,JSON.stringify(e))}function a(){const e=localStorage.getItem(r);if(!e)return localStorage.setItem(r,JSON.stringify(i)),i;try{return JSON.parse(e)}catch(t){return console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0430\u0440\u0441\u0438\u043d\u0433\u0430 schedule \u0438\u0437 localStorage",t),[]}}function c(e){const t=a(),s=String(Date.now()),r=(0,n.A)({id:s},e);return t.push(r),l(t),r}function o(e){let t=a();t=t.filter((t=>t.id!==e)),l(t)}},5385:(e,t,s)=>{s.r(t),s.d(t,{DashboardPage:()=>O});var n=s(9379),r=s(5043),i=s(3927),l=s(7419),a=s(9071),c=s(5389),o=s(1002),d=s(1645),m=s(9073),u=s(5206),h=s(579);const{Title:g,Text:x}=i.A,j=e=>{let{title:t,value:s,extra:n,link:r,linkText:i}=e;return(0,h.jsx)(d.A,{span:8,children:(0,h.jsxs)(m.A,{className:"dashboard-card",children:[(0,h.jsx)(g,{level:4,children:t}),(0,h.jsx)(x,{className:"dashboard-card-value",children:s}),r&&(0,h.jsx)("div",{className:"dashboard-card-link",children:(0,h.jsx)(u.Ay,{type:"primary",href:r,children:i})})]})})};var A=s(9748),v=s(349),y=s(1115),f=s(7210),p=s(6036),w=s(5337);const S=s.p+"static/media/matem.07d589e7d657237eef9c.jpg",N="news",b=[{id:"1",author:"\u0423\u0447\u0438\u0442\u0435\u043b\u044c \u0418\u0432\u0430\u043d\u043e\u0432",role:"teacher",title:"\u041d\u043e\u0432\u0430\u044f \u043c\u0435\u0442\u043e\u0434\u0438\u043a\u0430 \u043f\u043e \u043c\u0430\u0442\u0435\u043c\u0430\u0442\u0438\u043a\u0435",content:"\u0423\u0447\u0438\u043c\u0441\u044f \u0440\u0435\u0448\u0430\u0442\u044c \u0437\u0430\u0434\u0430\u0447\u0438 \u0438\u043d\u0442\u0435\u0440\u0435\u0441\u043d\u044b\u043c \u0441\u043f\u043e\u0441\u043e\u0431\u043e\u043c...",createdAt:"2023-03-10T09:00:00.000Z",image:S},{id:"2",author:"Admin",role:"teacher",title:"\u0428\u043a\u043e\u043b\u044c\u043d\u044b\u0439 \u043f\u0440\u0430\u0437\u0434\u043d\u0438\u043a",content:"\u041f\u0440\u0438\u0433\u043b\u0430\u0448\u0430\u0435\u043c \u0432\u0441\u0435\u0445 \u043d\u0430 \u0434\u0435\u043d\u044c \u043e\u0442\u043a\u0440\u044b\u0442\u044b\u0445 \u0434\u0432\u0435\u0440\u0435\u0439...",createdAt:"2023-03-15T15:30:00.000Z",image:""}];function k(e){localStorage.setItem(N,JSON.stringify(e))}function I(){const e=localStorage.getItem(N);if(!e)return k(b),b;try{return JSON.parse(e)}catch(t){return console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0430\u0440\u0441\u0438\u043d\u0433\u0430 news \u0438\u0437 localStorage",t),[]}}const T=e=>new Promise(((t,s)=>{const n=new FileReader;n.readAsDataURL(e),n.onload=()=>t(n.result),n.onerror=e=>s(e)})),D=()=>{const e=(0,a.Ht)(),[t,s]=(0,r.useState)([]),[i,l]=(0,r.useState)(!1),[c]=A.A.useForm(),[o,d]=(0,r.useState)(!1),[g]=A.A.useForm(),[x,j]=(0,r.useState)(null);(0,r.useEffect)((()=>{const e=I();s(e)}),[]);const S=()=>{l(!1),c.resetFields()},N=()=>{d(!1),j(null),g.resetFields()},b=e=>{try{!function(e){let t=I();t=t.filter((t=>t.id!==e)),k(t)}(e),s((t=>t.filter((t=>t.id!==e)))),v.Ay.success({message:"\u041d\u043e\u0432\u043e\u0441\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u0430!"})}catch(t){v.Ay.error({message:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0438 \u043d\u043e\u0432\u043e\u0441\u0442\u0438"}),console.error(t)}},D=e=>Array.isArray(e)?e:null===e||void 0===e?void 0:e.fileList;return(0,h.jsxs)("div",{className:"newsContainer",children:[(0,h.jsx)("h2",{children:"\u041d\u043e\u0432\u043e\u0441\u0442\u0438"}),"teacher"===(null===e||void 0===e?void 0:e.role)&&(0,h.jsx)(u.Ay,{type:"primary",style:{marginBottom:16},onClick:()=>{l(!0),c.resetFields()},children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043d\u043e\u0432\u043e\u0441\u0442\u044c"}),(0,h.jsx)("div",{className:"newsList",children:t.map((t=>(0,h.jsx)("div",{className:"newsCard",children:(0,h.jsxs)(m.A,{children:[(0,h.jsxs)("div",{className:"newsMeta content",children:["\u0410\u0432\u0442\u043e\u0440: ",(0,h.jsx)("b",{children:t.author})," |"," ",new Date(t.createdAt).toLocaleString()]}),t.image&&(0,h.jsx)("div",{children:(0,h.jsx)("img",{src:t.image,alt:"\u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u043d\u043e\u0432\u043e\u0441\u0442\u0438",className:"newsImage"})}),(0,h.jsxs)("div",{className:"content",children:[(0,h.jsx)("div",{className:"newsTitle",children:t.title}),(0,h.jsx)("div",{className:"newsContent",children:t.content}),"teacher"===(null===e||void 0===e?void 0:e.role)&&(0,h.jsxs)("div",{style:{textAlign:"right",marginTop:8},children:[(0,h.jsx)(u.Ay,{type:"link",onClick:()=>(e=>{j(e.id),d(!0),g.setFieldsValue({title:e.title,content:e.content,image:e.image?[{uid:"-1",name:"news-image",status:"done",url:e.image}]:[]})})(t),style:{marginRight:8},children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"}),(0,h.jsx)(u.Ay,{danger:!0,type:"link",onClick:()=>b(t.id),children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]})]})]})},t.id)))}),(0,h.jsx)(y.A,{title:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043d\u043e\u0432\u043e\u0441\u0442\u044c",open:i,onCancel:S,onOk:()=>c.submit(),children:(0,h.jsxs)(A.A,{form:c,layout:"vertical",onFinish:async t=>{try{let r="";if(t.image&&t.image.length>0){const e=t.image[0].originFileObj;r=await T(e)}const i=function(e){const t=I(),s=String(Date.now()),r=(0,n.A)({id:s},e);return t.unshift(r),k(t),r}({author:e.fullName||e.login,role:e.role,title:t.title,content:t.content,createdAt:(new Date).toISOString(),image:r});s((e=>[i,...e])),v.Ay.success({message:"\u041d\u043e\u0432\u043e\u0441\u0442\u044c \u043e\u043f\u0443\u0431\u043b\u0438\u043a\u043e\u0432\u0430\u043d\u0430!"}),S()}catch(r){v.Ay.error({message:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0438 \u043d\u043e\u0432\u043e\u0441\u0442\u0438"}),console.error(r)}},name:"createNewsForm",children:[(0,h.jsx)(A.A.Item,{label:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a",name:"title",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u043d\u043e\u0432\u043e\u0441\u0442\u0438"}],children:(0,h.jsx)(f.A,{})}),(0,h.jsx)(A.A.Item,{label:"\u0421\u043e\u0434\u0435\u0440\u0436\u0430\u043d\u0438\u0435",name:"content",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043a\u0441\u0442 \u043d\u043e\u0432\u043e\u0441\u0442\u0438"}],children:(0,h.jsx)(f.A.TextArea,{rows:4})}),(0,h.jsx)(A.A.Item,{label:"\u0424\u043e\u0442\u043e (\u043e\u0434\u043d\u043e)",name:"image",valuePropName:"fileList",getValueFromEvent:D,children:(0,h.jsx)(p.A,{listType:"picture-card",maxCount:1,beforeUpload:()=>!1,children:(0,h.jsxs)("div",{children:[(0,h.jsx)(w.A,{}),(0,h.jsx)("div",{style:{marginTop:8},children:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c"})]})})})]})}),(0,h.jsx)(y.A,{title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043d\u043e\u0432\u043e\u0441\u0442\u044c",open:o,onCancel:N,onOk:()=>g.submit(),children:(0,h.jsxs)(A.A,{form:g,layout:"vertical",onFinish:async e=>{try{let t="";if(e.image&&e.image.length>0){const s=e.image[0].originFileObj;t=await T(s)}const r=function(e,t){const s=I(),r=s.findIndex((t=>t.id===e));return-1===r?(console.warn("\u041d\u043e\u0432\u043e\u0441\u0442\u044c \u0441 id=".concat(e," \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430")),null):(s[r]=(0,n.A)((0,n.A)({},s[r]),t),k(s),s[r])}(x,{title:e.title,content:e.content,image:t});s((e=>e.map((e=>e.id===x?r:e)))),v.Ay.success({message:"\u041d\u043e\u0432\u043e\u0441\u0442\u044c \u043e\u0442\u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0430!"}),N()}catch(t){v.Ay.error({message:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0438 \u043d\u043e\u0432\u043e\u0441\u0442\u0438"}),console.error(t)}},name:"editNewsForm",children:[(0,h.jsx)(A.A.Item,{label:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a",name:"title",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u043d\u043e\u0432\u043e\u0441\u0442\u0438"}],children:(0,h.jsx)(f.A,{})}),(0,h.jsx)(A.A.Item,{label:"\u0421\u043e\u0434\u0435\u0440\u0436\u0430\u043d\u0438\u0435",name:"content",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043a\u0441\u0442 \u043d\u043e\u0432\u043e\u0441\u0442\u0438"}],children:(0,h.jsx)(f.A.TextArea,{rows:4})}),(0,h.jsx)(A.A.Item,{label:"\u0424\u043e\u0442\u043e (\u043e\u0434\u043d\u043e)",name:"image",valuePropName:"fileList",getValueFromEvent:D,children:(0,h.jsx)(p.A,{listType:"picture-card",maxCount:1,beforeUpload:()=>!1,children:(0,h.jsxs)("div",{children:[(0,h.jsx)(w.A,{}),(0,h.jsx)("div",{style:{marginTop:8},children:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c"})]})})})]})})]})},{Title:F,Text:C}=i.A,O=()=>{const[e,t]=(0,r.useState)(null),[s,i]=(0,r.useState)([]),[d,m]=(0,r.useState)([]),[u,g]=(0,r.useState)(null);return(0,r.useEffect)((()=>{const e=(0,a.Ht)();e&&t(e);const s=(0,c.OM)();i(s);const r=(0,o.DC)();if(m(r),r.length>0){const e=new Date,t=r.map((e=>{const[t,s,r]=e.date.split("-"),[i,l]=e.time.split(":"),a=new Date(+t,+s-1,+r,+i,+l);return(0,n.A)((0,n.A)({},e),{},{eventDate:a})})).filter((t=>t.eventDate>e)).sort(((e,t)=>e.eventDate-t.eventDate));t.length>0&&g(t[0])}}),[]),(0,h.jsxs)("div",{style:{padding:"16px"},children:[(0,h.jsxs)(F,{level:2,children:["\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c, ",null===e||void 0===e?void 0:e.fullName,"!"]}),(0,h.jsxs)(C,{children:["\u0412\u0430\u0448\u0430 \u0440\u043e\u043b\u044c: ",(0,h.jsx)("b",{children:"teacher"===(null===e||void 0===e?void 0:e.role)?"\u041f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u044c":"\u0421\u0442\u0443\u0434\u0435\u043d\u0442"})]}),(0,h.jsxs)(l.A,{gutter:[16,16],style:{marginTop:16},children:[(0,h.jsx)(j,{title:"\u0412\u0441\u0435\u0433\u043e \u043a\u0443\u0440\u0441\u043e\u0432:",value:s.length,link:"#/courses",linkText:"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u043a \u043a\u0443\u0440\u0441\u0430\u043c"}),(0,h.jsx)(j,{title:"\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435:",value:"".concat(d.length," \u0437\u0430\u043d\u044f\u0442\u0438\u0439"),extra:u?(0,h.jsxs)("div",{children:[(0,h.jsx)(C,{type:"secondary",children:"\u0411\u043b\u0438\u0436\u0430\u0439\u0448\u0435\u0435 \u0437\u0430\u043d\u044f\u0442\u0438\u0435:"}),(0,h.jsx)("div",{children:(0,h.jsxs)(C,{children:[u.date," \u0432 ",u.time,", \u043a\u0443\u0440\u0441 ID ",u.courseId]})})]}):(0,h.jsx)(C,{type:"secondary",children:"\u0411\u043b\u0438\u0436\u0430\u0439\u0448\u0438\u0445 \u0437\u0430\u043d\u044f\u0442\u0438\u0439 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e."}),link:"#/schedule",linkText:"\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435"})]}),(0,h.jsx)(D,{})]})}}}]);
//# sourceMappingURL=58.4b5e0dbd.chunk.js.map