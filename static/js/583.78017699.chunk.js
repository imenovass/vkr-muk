"use strict";(self.webpackChunksevara=self.webpackChunksevara||[]).push([[583],{5389:(e,t,r)=>{r.d(t,{C_:()=>l,J4:()=>d,OM:()=>o,YG:()=>c,zs:()=>u});var n=r(9379);const i="courses",s=[{id:"1",title:"\u041c\u0430\u0442\u0435\u043c\u0430\u0442\u0438\u043a\u0430",description:"\u0411\u0430\u0437\u043e\u0432\u044b\u0439 \u043a\u0443\u0440\u0441 \u043f\u043e \u043c\u0430\u0442\u0435\u043c\u0430\u0442\u0438\u043a\u0435",teacherId:"teacher"},{id:"2",title:"\u0424\u0438\u0437\u0438\u043a\u0430",description:"\u0412\u0432\u0435\u0434\u0435\u043d\u0438\u0435 \u0432 \u043c\u0435\u0445\u0430\u043d\u0438\u043a\u0443",teacherId:"teacher"}];function o(){const e=localStorage.getItem(i);if(!e)return localStorage.setItem(i,JSON.stringify(s)),s;try{return JSON.parse(e)}catch(t){return console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0430\u0440\u0441\u0438\u043d\u0433\u0430 \u043a\u0443\u0440\u0441\u043e\u0432 \u0438\u0437 localStorage",t),[]}}function c(e){return o().find((t=>t.id===e))||null}function a(e){localStorage.setItem(i,JSON.stringify(e))}function l(e){const t=o(),r=String(Date.now()),i=(0,n.A)({id:r},e);return t.push(i),a(t),i}function d(e,t){const r=o(),i=r.findIndex((t=>t.id===e));return-1===i?null:(r[i]=(0,n.A)((0,n.A)({},r[i]),t),a(r),r[i])}function u(e){let t=o();t=t.filter((t=>t.id!==e)),a(t)}},4583:(e,t,r)=>{r.r(t),r.d(t,{CoursesPage:()=>g});var n=r(5043),i=r(9748),s=r(5206),o=r(9602),c=r(9462),a=r(6616),l=r(1982),d=r(2250),u=r(9071),h=r(5389),A=r(579);const g=()=>{const e=(0,d.Zp)(),t=(0,u.Ht)(),[r,g]=(0,n.useState)([]),[m,p]=(0,n.useState)(!1),[y]=i.A.useForm();(0,n.useEffect)((()=>{let e=(0,h.OM)();e=e.sort(((e,t)=>new Date(t.createdAt)-new Date(e.createdAt))),g(e)}),[]);const f=[{title:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",dataIndex:"title",key:"title"},{title:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",dataIndex:"description",key:"description"},{title:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f",key:"actions",render:(t,r)=>(0,A.jsx)(s.Ay,{type:"link",onClick:()=>e("/courses/".concat(r.id)),children:"\u041e\u0442\u043a\u0440\u044b\u0442\u044c"})}],x=()=>{p(!1),y.resetFields()};return(0,A.jsxs)("div",{children:[(0,A.jsx)("h2",{children:"\u0421\u043f\u0438\u0441\u043e\u043a \u043a\u0443\u0440\u0441\u043e\u0432"}),"teacher"===(null===t||void 0===t?void 0:t.role)&&(0,A.jsx)(s.Ay,{type:"primary",onClick:()=>{p(!0)},style:{marginBottom:16},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u0443\u0440\u0441"}),(0,A.jsx)(c.A,{rowKey:"id",columns:f,dataSource:r,pagination:!1}),(0,A.jsx)(a.A,{title:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u0443\u0440\u0441",open:m,onCancel:x,onOk:()=>y.submit(),children:(0,A.jsxs)(i.A,{form:y,layout:"vertical",onFinish:async e=>{try{const{title:r,description:n}=e,i=(0,h.C_)({title:r,description:n,teacherId:t.login,createdAt:(new Date).toISOString()});g((e=>[...e,i].sort(((e,t)=>new Date(t.createdAt)-new Date(e.createdAt))))),o.Ay.success({message:"\u041a\u0443\u0440\u0441 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0437\u0434\u0430\u043d!"}),x()}catch(r){console.error(r),o.Ay.error({message:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0438 \u043a\u0443\u0440\u0441\u0430"})}},onFinishFailed:e=>{console.log("Validation Failed:",e)},children:[(0,A.jsx)(i.A.Item,{label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043a\u0443\u0440\u0441\u0430",name:"title",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043a\u0443\u0440\u0441\u0430"}],children:(0,A.jsx)(l.A,{})}),(0,A.jsx)(i.A.Item,{label:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",name:"description",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043a\u0443\u0440\u0441\u0430"}],children:(0,A.jsx)(l.A.TextArea,{rows:3})})]})})]})}}}]);
//# sourceMappingURL=583.78017699.chunk.js.map