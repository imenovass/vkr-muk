"use strict";(self.webpackChunksevara=self.webpackChunksevara||[]).push([[583],{5389:(e,t,r)=>{r.d(t,{C_:()=>c,J4:()=>d,OM:()=>a,YG:()=>l,zs:()=>u});var i=r(9379);const n="courses",s=[{id:"1",title:"\u041c\u0430\u0442\u0435\u043c\u0430\u0442\u0438\u043a\u0430",description:"\u0411\u0430\u0437\u043e\u0432\u044b\u0439 \u043a\u0443\u0440\u0441 \u043f\u043e \u043c\u0430\u0442\u0435\u043c\u0430\u0442\u0438\u043a\u0435",teacherId:"teacher"},{id:"2",title:"\u0424\u0438\u0437\u0438\u043a\u0430",description:"\u0412\u0432\u0435\u0434\u0435\u043d\u0438\u0435 \u0432 \u043c\u0435\u0445\u0430\u043d\u0438\u043a\u0443",teacherId:"teacher"}];function a(){const e=localStorage.getItem(n);if(!e)return localStorage.setItem(n,JSON.stringify(s)),s;try{return JSON.parse(e)}catch(t){return console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0430\u0440\u0441\u0438\u043d\u0433\u0430 \u043a\u0443\u0440\u0441\u043e\u0432 \u0438\u0437 localStorage",t),[]}}function l(e){return a().find((t=>t.id===e))||null}function o(e){localStorage.setItem(n,JSON.stringify(e))}function c(e){const t=a(),r=String(Date.now()),n=(0,i.A)({id:r},e);return t.push(n),o(t),n}function d(e,t){const r=a(),n=r.findIndex((t=>t.id===e));return-1===n?null:(r[n]=(0,i.A)((0,i.A)({},r[n]),t),o(r),r[n])}function u(e){let t=a();t=t.filter((t=>t.id!==e)),o(t)}},4583:(e,t,r)=>{r.r(t),r.d(t,{CoursesPage:()=>g});var i=r(5043),n=r(9748),s=r(5206),a=r(9602),l=r(9462),o=r(6616),c=r(1982),d=r(2250),u=r(9071),h=r(5389),m=r(579);const g=()=>{const e=(0,d.Zp)(),t=(0,u.Ht)(),[r,g]=(0,i.useState)([]),[p,A]=(0,i.useState)(!1),[x]=n.A.useForm();(0,i.useEffect)((()=>{let e=(0,h.OM)();e=e.sort(((e,t)=>new Date(t.createdAt)-new Date(e.createdAt))),g(e)}),[]);const y=[{title:"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435",dataIndex:"imageUrl",key:"imageUrl",width:70,render:(e,t)=>{const r=e||"https://placehold.co/50x50?text=No+Image";return(0,m.jsx)("img",{src:r,alt:t.title,style:{width:50,height:50,objectFit:"cover",borderRadius:"50%"}})}},{title:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",dataIndex:"title",key:"title"},{title:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",dataIndex:"description",key:"description"},{title:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f",key:"actions",render:(t,r)=>(0,m.jsx)(s.Ay,{type:"link",onClick:()=>e("/courses/".concat(r.id)),children:"\u041e\u0442\u043a\u0440\u044b\u0442\u044c"})}],f=()=>{A(!1),x.resetFields()};return(0,m.jsxs)("div",{children:[(0,m.jsx)("h2",{children:"\u0421\u043f\u0438\u0441\u043e\u043a \u043a\u0443\u0440\u0441\u043e\u0432"}),"teacher"===(null===t||void 0===t?void 0:t.role)&&(0,m.jsx)(s.Ay,{type:"primary",onClick:()=>{A(!0)},style:{marginBottom:16},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u0443\u0440\u0441"}),(0,m.jsx)(l.A,{rowKey:"id",columns:y,dataSource:r,pagination:!1}),(0,m.jsx)(o.A,{title:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u0443\u0440\u0441",open:p,onCancel:f,onOk:()=>x.submit(),children:(0,m.jsxs)(n.A,{form:x,layout:"vertical",onFinish:async e=>{try{const{title:r,description:i,imageUrl:n}=e,s=(0,h.C_)({title:r,description:i,teacherId:t.login,createdAt:(new Date).toISOString(),imageUrl:n});g((e=>[...e,s].sort(((e,t)=>new Date(t.createdAt)-new Date(e.createdAt))))),a.Ay.success({message:"\u041a\u0443\u0440\u0441 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0437\u0434\u0430\u043d!"}),f()}catch(r){console.error(r),a.Ay.error({message:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0438 \u043a\u0443\u0440\u0441\u0430"})}},onFinishFailed:e=>{console.log("Validation Failed:",e)},children:[(0,m.jsx)(n.A.Item,{label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043a\u0443\u0440\u0441\u0430",name:"title",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043a\u0443\u0440\u0441\u0430"}],children:(0,m.jsx)(c.A,{})}),(0,m.jsx)(n.A.Item,{label:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",name:"description",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043a\u0443\u0440\u0441\u0430"}],children:(0,m.jsx)(c.A.TextArea,{rows:3})}),(0,m.jsx)(n.A.Item,{label:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 (\u043d\u0435\u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e)",name:"imageUrl",rules:[{type:"url",message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u0443\u044e \u0441\u0441\u044b\u043b\u043a\u0443 \u043d\u0430 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 (URL)"}],children:(0,m.jsx)(c.A,{placeholder:"https://example.com/image.jpg"})})]})})]})}}}]);
//# sourceMappingURL=583.8c53a8d4.chunk.js.map